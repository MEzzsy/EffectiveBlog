# 单独编译

C++程序分为三部分：

-   头文件：包含结构声明和使用这些结构的函数的原型。
-   源代码文件：包含与结构有关的丽数的代码。
-   源代码文件：包含调用与结构相关的函数的代码。

不要将函数定义或变量声明放到头文件中。例如，如果在头文件包含一个函数定义，然后在其他两个文件(属于同一个程序)中包含该头文件，则同一个程序中将包含同一个函数的两个定义，除非函数是内联的，否则这将出错。

下面列出了头文件中常包含的内容。

-   函数原型
-   使用#define 或const定义的符号常量
-   结构声明
-   类声明
-   模板声明
-   内联函数

# 作用域和链接

作用域(scope)描述了名称在文件(翻译单元)的多大范围内可见。例如，函数中定义的变量可在该函数中使用，但不能在其他函数中使用

链接性(linkage) 描述了名称如何在不同单元间共享。链接性为外部的名称可在文件间共享，链接性为内部的名称只能由一个文件中的函数共享。自动变量的名称没有链接性，因为它们不能共享。

作用域为局部的变量只在定义它的代码块中可用。代码块是由花括号括起的一系列语句。例如函数体就是代码块，但可以在函数体中嵌入其他代码块。

作用域为全局( 也叫文件作用域)的变量在定义位置到文件结尾之间都可用。

自动变量的作用域为局部，静态变量的作用域是全局还是局部取决于它是如何被定义的。

在函数原型作用域(function prototype scope)中使用的名称只在包含参数列表的括号内可用。

在类中声明的成员的作用域为整个类。

在名称空间中声明的变量的作用域为整个名称空间(由于名称空间已经引入到C++语言中，因此全局作用域是名称空间作用域的特例)。

C++函数的作用域可以是整个类或整个名称空间(包括全局的)，但不能是局部的(因为不能在代码块内定义函数，如果函数的作用域为局部，则只对它自己是可见的，因此不能被其他函数调用。这样的函数将无法运行)。

C++为静态存储持续性变量提供了3种链接性：外部链接性(可在其他文件中访问)、内部链接性(只能在当前文件中访问)和无链接性(只能在当前函数或代码块中访问)。

由于静态变量的数目在程序运行期间是不变的，因此程序不需要使用特殊的装置(如栈)来管理它们。编译器将分配固定的内存块来存储所有的静态变量，这些变量在整个程序执行期间一直存在。另外，如果没有显式地初始化静态变量，编译器将把它设置为0。在默认情况下，静态数组和结构将每个元素或成员的所有位都设置为0。

如何创建这3种静态持续变量：

要创建链接性为外部的静态持续变量，必须在代码块的外面声明它

要创建链接性为内部的静态持续变量，必须在代码块的外面声明它，并使用static限定符

要创建没有链接性的静态持续变量，必须在代码块内声明它，并使用static限定符。

